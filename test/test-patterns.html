<!doctype html>
<meta charset="utf-8">
<title>github.com/met/subadub - test patterns</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" type="text/css" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">

<!-- https://github.com/fiduswriter/Simple-DataTables -->
<link href="https://cdn.jsdelivr.net/npm/simple-datatables@latest/dist/style.css" rel="stylesheet" type="text/css" integrity="sha384-8Ckacg2VU1a6F7C9WWfGL3hQ0LrYBIbZ9za/dpYLtntTtGvHxrzb+uLzOwZU/Xyt" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/simple-datatables@latest" type="text/javascript" integrity="sha384-+NH1Lmhq1u8XKi1XBTaE+L8OWwUMKaIgO+1cvgDH3N31BLAwidVFIFDQSzJK//l0" crossorigin="anonymous"></script>

<body class="container">
<h1 class="mt-3">Test patterns for subtitles transformations</h1>

<form class="mt-5 mb-3" class="row">
<label for="input" class="form-label">Subtitles to transform:</label>

<textarea id="input" class="form-control mt-3 mb-3" style="height:20em" lang="es">
Something is coming.
Something hungry for blood.
That... that sound?
The campaign took two weeks to plan.
[Mike] Something is coming.
[screaming]
[screaming continues]
-What is it?
-We're in deep shit.
-Will, your action!
-Told ya. [chuckling]
-[snorts]
-[all chuckling] 
-[yells] Boom!
&lt;i>Stick and stones,&lt;/i>
-[John]&lt;i>Stick&lt;/i> and &lt;i>stones,&lt;/i>
&lt;i>♪ I don't care at all ♪&lt;/i>
and he's in here all the time.
If you see there stripes,
that means they're a non-player character.
All you gotta do is check the neck.
But in here, it's all good, right?
That's great.
Right. Well, thank you, Tilly.
You know, I'm just taking a break
from the real world.
and I can't even afford to flight
to go see her.
Well, they do look very, very real.
I'm sorry. That's terrible.
The ones without stripes.
we're the realies.
So are you blowing off steam playing hero,
Yeah, the real worls sucks.
or working something out?
My sister Jill
is Supergirl's biggest fan in real life.
[chuckles] Call me Bonnie.
A lone hacker, Richard Bates,
exploited it for his own ends.
Since Luthor Corp came aboard,
the only glitch involved a fail-safe.
And that was a fluke.
What would Alex say?
That with Lex, anything is possible.
I've got Henshaw, but I don't know where--
"Han Solo never looked so good."</textarea>

<div>
	<div id="selector-container">
		<label for="transformation-type">Type of transformation:</label>
	</div>
	<input id="btn-process" type="button" class="btn btn-primary mb-3" value="Transform subtitles">
</div>
</form>


<div id="output-area" class="collapse mb-3">
	<div class="card row">
		<h4 class="card-header">Transformed subtitles:</h4>
		<div id="processed" class="card-text m-3">...</div>
	</div>
</div>


<footer class="text-center fst-italic pt-4">
	<p>Created by <a href="https://twitter.com/hassmanm">Martin Hassman</a>. Source code on <a href="https://github.com/met/subadub">GitHub</a>. Based on <a href="https://github.com/rsimmons/subadub">rsimmons/subadub</a></p>
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js" type="text/javascript" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" crossorigin="anonymous"></script>

<script type="text/javascript" src="../dist/subaoff.js"></script>
<script type="text/javascript">
"use strict";
function initEvents() {
	document.getElementById("btn-process").onclick = function(e)  {
		let btn = document.getElementById("btn-process");
		btn.dataset.originalValue = btn.value;
		btn.value = "Transforming...";
		setTimeout(process, 10);
		return false;
	};
}

function initUI() {
	initEvents();

	subaoff.createMethodSelector(document.getElementById("selector-container"), { "id" : "transformation-type", "class" : "form-select mb-3", "aria-label": "Select type of transformation", "style":"width:30%" });
}
initUI();


function process() {
	let text = document.getElementById("input").value;
	let lines = text.split("\n");
	let output = '<table id="tbl-procesed" class="table"><thead><tr><th>Original</th><th>Transformed</th></tr></thead><tbody>';
	document.getElementById("processed").innerHTML = "";

	for (const line of lines) {
		let transformedLine = subaoff.transformations.run(line);

		// do not forget to escape HTML output, change "<" into "&lt;""
		output += "<tr><td>" + htmlEscape(line) + "</td><td>" + htmlEscape(transformedLine) + "</td></tr>";
	}

	output += "</tbody></table>";
	document.getElementById("processed").innerHTML = output;

	var dataTable1 = new simpleDatatables.DataTable("#tbl-procesed", {paging:false});

	document.getElementById("output-area").classList.remove("collapse");	
	document.getElementById("btn-process").value = document.getElementById("btn-process").dataset.originalValue;
}

function htmlEscape(s) {
	return s.replace(/&/g,"&amp;").replace(/</g,"&lt;");
}

</script>